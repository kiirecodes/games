<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        *::before,
        *::after {
            box-sizing: border-box;
        }

        * {
            padding: 0;
            margin: 0;
        }

        body {
            display: flex;
            flex-direction: column;
            font-family: Arial, Helvetica, sans-serif;
            font-weight: 600;
            font-size: larger;
            justify-content: center;
            height: 100vh;
            background-color: aqua;
            align-items: center;
        }

        .row {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .col {
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid black;
            width: 75px;
            height: 75px;
            cursor: pointer;
        }

        .cursor {
            background-color: black;
        }

        .msg {
            font-size: 120px;
            display: none;
        }
    </style>
    <script>
        document.addEventListener(
            "DOMContentLoaded", () => {
                const cols = document.querySelectorAll(".col");
                const rows = document.querySelectorAll(".row");
                var cursor = document.querySelector(".cursor");
                const msg = document.querySelector(".msg");

                const move = (col) => {
                    cursor.classList.remove("cursor");
                    col.classList.add("cursor");
                    const x = cursor.innerHTML;
                    cursor.innerHTML = col.innerHTML;
                    col.innerHTML = x;
                    cursor = col;
                }

                const checkValid = (col) => {
                    if(
                        ((col.dataset.col === cursor.dataset.col) && 
                        (parseInt(col.dataset.row)-1==parseInt(cursor.dataset.row)||
                        parseInt(col.dataset.row)+1==parseInt(cursor.dataset.row)))||
                        ((col.dataset.row === cursor.dataset.row) && 
                        (parseInt(col.dataset.col)-1==parseInt(cursor.dataset.col)||
                        parseInt(col.dataset.col)+1==parseInt(cursor.dataset.col)))
                    ) return true;
                }

                document.addEventListener("click", (e)=>{
                    if (!e.target.classList.contains("cursor")){
                        checkWin();
                        if(checkValid(e.target)) {move(e.target); checkWin()}
                    }
                })

                const loadRand = () => {
                    var taken = [16]
                    cols.forEach((col)=>{
                        var x = Math.ceil(Math.random()*15);
                        while(taken.includes(x))
                        {
                            if (col.innerHTML==16)
                            {
                                x = 16 
                                break;
                            }
                            x = Math.ceil(Math.random()*15);
                        }
                        col.innerHTML = x;
                        taken.push(x);
                    })
                }

                const checkWin =()=> {
                    var ret = true;
                    cols.forEach((col)=>{
                        if(
                            parseInt(col.dataset.value)!=parseInt(col.innerHTML)
                        ) ret = false;
                    });
                    if (ret)
                    {
                        document.querySelectorAll(".row").forEach((row)=>{
                            row.style.display = "none";
                        });

                        document.querySelector(".msg").style.display = "block";
                    }
                }

                loadRand()
            }
        )
    </script>
</head>
<body>
    <h1 class="msg">You Won</h1>
    <div class="row">
        <div class="col" data-row="1" data-col="1" data-value="1"></div>
        <div class="col" data-row="1" data-col="2" data-value="2"></div>
        <div class="col" data-row="1" data-col="3" data-value="3"></div>
        <div class="col" data-row="1" data-col="4" data-value="4"></div>
    </div>
    <div class="row">
        <div class="col" data-row="2" data-col="1" data-value="5"></div>
        <div class="col" data-row="2" data-col="2" data-value="6"></div>
        <div class="col" data-row="2" data-col="3" data-value="7"></div>
        <div class="col" data-row="2" data-col="4" data-value="8"></div>
    </div>
    <div class="row">
        <div class="col" data-row="3" data-col="1" data-value="9"></div>
        <div class="col" data-row="3" data-col="2" data-value="10"></div>
        <div class="col" data-row="3" data-col="3" data-value="11"></div>
        <div class="col" data-row="3" data-col="4" data-value="12"></div>
    </div>
    <div class="row">
        <div class="col" data-row="4" data-col="1" data-value="13"></div>
        <div class="col" data-row="4" data-col="2" data-value="14"></div>
        <div class="col" data-row="4" data-col="3" data-value="15"></div>
        <div class="col cursor" data-row="4" data-col="4" data-value="16">16</div>
    </div>
</body>
</html>